<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="zh-CN">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="zh-CN">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>逸珑8089D共创桌面的一些使用问题 | Gigasky</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="8089D_CoCreate_files/style.css">
<link rel="pingback" href="https://gigasky.blog.ustc.edu.cn/xmlrpc.php">
<!--[if lt IE 9]>
<script src="https://gigasky.blog.ustc.edu.cn/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="Gigasky » Feed" href="https://gigasky.blog.ustc.edu.cn/?feed=rss2">
<link rel="alternate" type="application/rss+xml" title="Gigasky » 评论 Feed" href="https://gigasky.blog.ustc.edu.cn/?feed=comments-rss2">
<link rel="alternate" type="application/rss+xml" title="Gigasky » 逸珑8089D共创桌面的一些使用问题 评论 Feed" href="https://gigasky.blog.ustc.edu.cn/?feed=rss2&amp;p=17">
<script type="text/javascript" src="8089D_CoCreate_files/comment-reply.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://gigasky.blog.ustc.edu.cn/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://gigasky.blog.ustc.edu.cn/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="用Mathematica写了个简版雷电" href="https://gigasky.blog.ustc.edu.cn/?p=4">
<meta name="generator" content="WordPress 3.9-alpha">
<link rel="canonical" href="https://gigasky.blog.ustc.edu.cn/?p=17">
<link rel="shortlink" href="https://gigasky.blog.ustc.edu.cn/?p=17">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #e2e2e2; }
</style>
</head>

<body class="single single-post postid-17 single-format-standard custom-background single-author singular two-column right-sidebar">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="https://gigasky.blog.ustc.edu.cn/" title="Gigasky" rel="home">Gigasky</a></span></h1>
				<h2 id="site-description">空空如也</h2>
			</hgroup>

						<a href="https://gigasky.blog.ustc.edu.cn/">
									<img src="8089D_CoCreate_files/lanterns.jpg" alt="" height="288" width="1000">
							</a>
			
								<form method="get" id="searchform" action="https://gigasky.blog.ustc.edu.cn/">
		<label for="s" class="assistive-text">搜索</label>
		<input class="field" name="s" id="s" placeholder="搜索" type="text">
		<input class="submit" name="submit" id="searchsubmit" value="搜索" type="submit">
	</form>
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">主菜单</h3>
								<div class="skip-link"><a class="assistive-text" href="#content" title="跳至主内容区域">跳至主内容区域</a></div>
				<div class="skip-link"><a class="assistive-text" href="#secondary" title="跳至副内容区域">跳至副内容区域</a></div>
								<div class="menu"><ul><li><a href="https://gigasky.blog.ustc.edu.cn/">首页</a></li><li class="page_item page-item-7"><a href="https://gigasky.blog.ustc.edu.cn/?page_id=7">About me</a></li></ul></div>
			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">文章导航</h3>
						<span class="nav-previous"><a href="https://gigasky.blog.ustc.edu.cn/?p=4" rel="prev"><span class="meta-nav">←</span> 上一篇</a></span>
						<span class="nav-next"></span>
					</nav><!-- #nav-single -->

					
<article id="post-17" class="post-17 post type-post status-publish format-standard hentry category-loongson tag-8089d tag-7 tag-6 tag-loongson">
	<header class="entry-header">
		<h1 class="entry-title">逸珑8089D共创桌面的一些使用问题</h1>

				<div class="entry-meta">
			<span class="sep">发表于 </span><a href="https://gigasky.blog.ustc.edu.cn/?p=17" title="下午 6:59" rel="bookmark"><time class="entry-date" datetime="2013-11-29T18:59:41+00:00">2013 年 11 月 29 日</time></a><span class="by-author"> <span class="sep"> 由 </span> <span class="author vcard"><a class="url fn n" href="https://gigasky.blog.ustc.edu.cn/?author=1" title="查看所有由 ronosol 发布的文章" rel="author">ronosol</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>最近入手了龙芯小本“逸珑 8089D”，处理器是2F的，性能略弱，但也还能说得过去。整机的软件系统在细节上bug不少，有很多大家可能头一次遇到，搞不定的问题。我把大家在用小本自带的共创桌面系统中可能遇到的问题在这里说一下。</p>
<p>以下问题均针对“共创桌面”，不包括自装Debian的问题。</p>
<p>&nbsp;</p>
<p>1.如何关掉开机自动运行的那个类似学习机的界面。</p>
<p>这个可能是大家问的最多的问题了。共创桌面的开机自动启动程序入口在</p>
<p>/usr/share/autostart</p>
<p>这个目录下有一堆 .desktop 文件，其中 loongson_desktop.desktop 
就是那个学习机界面的“快捷方式”，是文本文件，可直接cat查看内容，改名或删除均可，改名后扩展名不要是 .desktop。另外 
qstart.desktop 是开机自动启动的自带的 RedOffice 的快速启动，也可以禁掉。</p>
<p>&nbsp;</p>
<p>2.怎样进行系统恢复。</p>
<p>出厂的系统是自带硬盘恢复的。但是开机的按tab，w键进行硬盘恢复的代码是有些问题的，和自带系统的路径不匹配，这里我们手动确定正确的代码。</p>
<p>首先搞清楚自带系统的分区结构，有 8G 的 SSD 和 160G 的传统硬盘两种机型。这两种是不一样的。我以 8G 的 ssd 为例，别的类似。</p>
<p>全盘有3个主分区一个扩展分区一个逻辑分区。</p>
<p>hda1 用于启动，134MB，就一个 boot.cfg，是启动菜单。</p>
<p>hda2 2.1GB，是系统恢复分区，</p>
<p>basesys-20100706.tar.gz</p>
<p>boot.cfg</p>
<p>config.txt</p>
<p>log.txt</p>
<p>OSFab-2010-0808.squashfs</p>
<p>OSFab-thirdpart-2010-0808.squashfs</p>
<p>vmlinuz</p>
<p>其中 config.txt 是分区表配置，有两种，一种对应 8G ssd，另一个对应160G 硬盘，一个参数Cfg.default_partitions用来设置使用哪种，自己改系统的话，这个文件一定要设对，不然分区就悲剧了。</p>
<p>3个大文件是系统镜像。</p>
<p>vmlinuz 是我们在恢复系统是要载如的系统内核。要记住的是它的路径。在PMON中的路径是 
/dev/fs/ext2@wd0b/vmlinuz，这里要根据实际情况改，wd0表示第一个硬盘，b表示第二个ext2分区，后面是路径，自带的恢复
不能用就是因为这个写错了。</p>
<p>hda3 1G swap分区</p>
<p>hda4 扩展分区</p>
<p>hda5 逻辑分区，挂在/上。</p>
<p>系统恢复的方式是开机安tab键，按w键选择硬盘恢复，会提示找不到文件 /dev/fs/ext2@wd0/boot/vmlinux，这个路径显然不对，估计是上一版系统的路径，现在系统路径更新了但是pmon里的代码没更新，在pmon下手动键入</p>
<p>load /dev/fs/ext2@wd0b/vmlinuz 回车 （这个根据自己的实际路径写）</p>
<p>等待载入完成后键入 g 回车，表示 go 运行。</p>
<p>然后会进入那个恢复软件，恢复时间大约不到半小时，保证电量充足即可。</p>
<p>不要直接 boot /dev/fs/ext2@wd0b/vmlinuz，这样在恢复完 tar.gz 包后另两个 squashfs 会出点问题。</p>
<p>&nbsp;</p>
<p>3.U盘恢复</p>
<p>跟上一个差不多，把恢复分区里的文件拷到u盘里。这方面的官方说明没有什么问题，照网上的来即可。我在最后附的文档里有这个的说明。</p>
<p>&nbsp;</p>
<p>4.修改源列表</p>
<p>路径 /etc/apt/sources.list</p>
<p>原来的文件是这样的</p>
<p>deb http://mirror.loongos.org/deb-archive-server/download medusa main non-free</p>
<p>deb-src http://mirror.loongos.org/deb-archive-server/download medusa main non-free</p>
<p>&nbsp;</p>
<p>deb http://mirror.loongos.org/mirror/debian lenny main contrib non-free</p>
<p>deb-src http://mirror.loongos.org/mirror/debian lenny main contrib non-free</p>
<p>&nbsp;</p>
<p>deb http://repository.loongos.org/repository/fanatic fanatic main</p>
<p>deb-src http://repository.loongos.org/repository/fanatic fanatic main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/debian-rebuild lenny main</p>
<p>deb-src http://dev.lemote.com/debian-rebuild lenny main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/debian-loongson/ loongson main</p>
<p>deb-src http://dev.lemote.com/debian-loongson/ loongson main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/tip current nm kde3 printing-update</p>
<p>deb-src http://dev.lemote.com/tip current nm kde3 printing-update</p>
<p>&nbsp;</p>
<p>然后在apt-get update的时候会提示无法连接，因为路径已经改了，全部迁移到http://dev.lemote.com/apt/fanatic下了，直接在浏览器里访问这个地址，会看到5个目录，分别对应上面的5项。所以把地址改一下即可，改成这个样子。</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/download medusa main non-free</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/download medusa main non-free</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/debian lenny main contrib non-free</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/debian lenny main contrib non-free</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/fanatic fanatic main</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/fanatic fanatic main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/debian-rebuild lenny main</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/debian-rebuild lenny main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/debian-loongson/ loongson main</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/debian-loongson/ loongson main</p>
<p>&nbsp;</p>
<p>deb http://dev.lemote.com/apt/fanatic/tip current nm kde3 printing-update</p>
<p>deb-src http://dev.lemote.com/apt/fanatic/tip current nm kde3 printing-update</p>
<p>&nbsp;</p>
<p>然后 apt-get update 后即可。会提示签名过期，确实是过期了，但是我没找到什么办法，应该是 dev.lemote.com 的问题。也不影响使用，在装包的时候提示签名安全问题，不管它，强制装就行了。</p>
<p>这样就可以装gcc等自己需要的东西，不用下码自己装了。</p>
<p>这个源的文件确实也是比较老，试了下，python 只有2.5没有2.7及以上。</p>
<p>&nbsp;</p>
<p>5.新建帐户的字体问题</p>
<p>显示不正常。把字体 dpi 强制为96即可。</p>
<p>&nbsp;</p>
<p>6.虚拟桌面个数</p>
<p>新建帐户有自己虚拟桌面。自带的yee就一个。</p>
<p>~/.kde/share/config/kwinrc 中 [desktops] 一节中 number=1 改成 number=4</p>
<p>&nbsp;</p>
<p>7.取消yee帐户自动登录</p>
<p>在控制中心里找登录设置。</p>
<p>&nbsp;</p>
<p>8.一些官方文档</p>
<p><a href="https://gigasky.blog.ustc.edu.cn/wp-content/uploads/2013/11/PMON%E6%89%8B%E5%86%8Cv0.1.pdf">PMON手册v0.1</a></p>
<p><a href="https://gigasky.blog.ustc.edu.cn/wp-content/uploads/2013/11/LynLoong-Cocreate-System-1.7.4_9003_Ch_Ele_ClaReadme.pdf">共创桌面1.7.4 U盘恢复方法</a></p>
<p>这两个文件来自 www.lemote.com，大家可在“技术支持”栏查找其他材料。</p>
<p>&nbsp;</p>
<p>(Dec 1st, 2013 更新)<br>
这几天有朋友问到共创桌面下安装lwqq的问题，lwqq是pidgin的一个插件，本身有x86的预编译包，在mipsel下需要手动编译安装。<br>
源码需要git下来，而github更新使得debian5的git不能用，debian6的可以。编译需要的库大部分自带源里都有，但是有三个要注意一下。<br>
libpurple-dev，在官网上，要求版本&gt;=2.8，2.8是debian7的，实测debian6的2.7也可以用。<br>
libev-dev，官方wiki上deb没要求具体版本，debian6也有，但是用debian6的话编译会报错。deiban7的正常。<br>
libmozjs185-dev，这个是debian7的库，debian6没有。<br>
共创基于deiban 5。</p>
<p>9.更新共创至某个版本的debian(至debian6没问题).<br>
自带的共创系统本身的包结构就有不少问题，比如提示自动卸载的包里有kwin,kdm就知道了。所以推荐改到dev.lemote.com源上后先upgrade一下。即<br>
sudo apt-get upgrade<br>
这个时候就会有一些依赖关系的错误(这还是共创自己的源)。手工解决它们。<br>
可以使用<br>
apt-get install -f<br>
解决一些问题。某些不太重要的东西可以先卸了，我是把redoffice都卸了。<br>
手工处理这些错误可能会花点时间。<br>
如果需要较新的包，可以在源列表里加入debian5或者debian6的源。<br>
这里以科大源为例<br>
deb http://mirrors.ustc.edu.cn/debian oldstable main contrib non-free<br>
deb-src http://mirrors.ustc.edu.cn/debian oldstable main contrib non-free<br>
这是debian6的源，可改为任意自己需要的源。注意查看dists目录下的分支是否匹配。<br>
之后可以upgrade一下，也是会有不少依赖关系的问题，但是都不是大问题，可以迁到debian6。<br>
如果需要迁到debian7的话，直接升会把系统升挂，推荐先upgrade到6，然需要什么7的包，单独装包，没必要upgrade到7。<br>
全部迁移到debian7要处理的错误的工作量比直接装7还大，比不上直接重装了。</p>
<p>10.手动安装lwqq.<br>
我的做法是把共创upgrade到debian6，然后装debian7的libev-dev和libmozjs185-dev的两个库。直接在共创里装debian6的库和debian7的两个包应该也没什么问题，这个我没有测试。<br>
在源列表里添加dehbian6的源。把共创upgrade到debian6，安装git，clone下lwqq的代码，安装build-
essential和cmake，然后configure一下lwqq的代码，看回显，缺什么库就装什么库。把除了debian7那俩库之外别的库装好
后，把源列表中的debian6源改为debian7源，例如<br>
deb http://mirrors.ustc.edu.cn/debian wheezy main contrib non-free<br>
deb-src http://mirrors.ustc.edu.cn/debian wheezy main contrib non-free<br>
然后安装libev-dev和libmozjs185-dev两个库。把build目录清空，重新cmake，然后编译安装。<br>
这样在pidgin中就有webqq协议了。<br>
<a href="https://gigasky.blog.ustc.edu.cn/wp-content/uploads/2013/11/lwqqpidgin.png"><img class="alignnone size-medium wp-image-28" alt="pidgin" src="8089D_CoCreate_files/lwqqpidgin-300x166.png" height="166" width="300"></a></p>
<p><a href="https://gigasky.blog.ustc.edu.cn/wp-content/uploads/2013/11/lwqq.png"><img class="alignnone size-medium wp-image-29" alt="lwqq" src="8089D_CoCreate_files/lwqq-300x175.png" height="175" width="300"></a><br>
感受：用龙芯小本不装什么需要折腾的东西的话，自带的共创还是可以用的。要自己折腾编译些东西，还是重装个系统吧，debian,parabola,gentoo都行，毕竟库是新的了。</p>
<style type="text/css"><!--
<span id="mce_marker" data-mce-type="bookmark"></span><span id="__caret">_</span><!-- @page { margin-left: 3.17cm; margin-right: 3.17cm; margin-top: 2.54cm; margin-bottom: 2.54cm } 		P { margin-top: 0.74cm; margin-bottom: 0.18cm; text-align: justify }
--></style>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		此条目由 <a href="https://gigasky.blog.ustc.edu.cn/?author=1">ronosol</a> 发表在 <a href="https://gigasky.blog.ustc.edu.cn/?cat=5" title="查看 loongson 中的全部文章" rel="category">loongson</a> 分类目录，并贴了 <a href="https://gigasky.blog.ustc.edu.cn/?tag=8089d" rel="tag">8089D</a>、<a href="https://gigasky.blog.ustc.edu.cn/?tag=%e5%85%b1%e5%88%9b" rel="tag">共创</a>、<a href="https://gigasky.blog.ustc.edu.cn/?tag=%e9%be%99%e8%8a%af" rel="tag">龙芯</a>、<a href="https://gigasky.blog.ustc.edu.cn/?tag=loongson" rel="tag">loongson</a> 标签。将<a href="https://gigasky.blog.ustc.edu.cn/?p=17" title="链向 逸珑8089D共创桌面的一些使用问题 的固定链接" rel="bookmark">固定链接</a>加入收藏夹。		
			</footer><!-- .entry-meta -->
</article><!-- #post-17 -->

						<div id="comments">
	
	
			<h2 id="comments-title">
			《<span>逸珑8089D共创桌面的一些使用问题</span>》上有 15 条评论		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-24">
		<article id="comment-24" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/819bb97c24fe75bde4a815609412bd1f.png" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">lee</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-24"><time datetime="2013-11-30T09:42:41+00:00">2013 年 11 月 30 日上午 9:42</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>你好 我更新源之前装不了lwqq，按你讲的更新之后也装不了，提示找不到软件包：libmozjs185-dev，怎么搞啊</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=24#respond" onclick='return addComment.moveForm("comment-24", "24", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-ronosol bypostauthor odd alt depth-2" id="li-comment-25">
		<article id="comment-25" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/4002ff3b0fde9017483bc0e0db35e26f.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ronosol</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-25"><time datetime="2013-11-30T19:08:02+00:00">2013 年 11 月 30 日下午 7:08</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>那是个pidgin的插件，直接用apt装的话我不知道它是不是有mipsel的预编译包，用源码我之前也没装过，这两天我试一下，共创下能用了告诉你</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=25#respond" onclick='return addComment.moveForm("comment-25", "25", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-26">
		<article id="comment-26" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/819bb97c24fe75bde4a815609412bd1f.png" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">lee</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-26"><time datetime="2013-12-01T22:01:38+00:00">2013 年 12 月 1 日下午 10:01</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>谢谢 我试试去</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=26#respond" onclick='return addComment.moveForm("comment-26", "26", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-29">
		<article id="comment-29" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659.png" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-29"><time datetime="2013-12-08T10:45:07+00:00">2013 年 12 月 8 日上午 10:45</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>你好！按你的方法用共创的原系统升级，折腾了很多次以后，各个模块好像都装好了。但编译时还有两个错误，看cmake报错信息，好像有两条：<br>
第一条是<br>
libpurple version:2.7.3<br>
libpurple version outdate<br>
– REQUIRED_VARS  (missing:  Sphinx-build_EXECUTABLE Sphinx-apidoc_EXECUTABLE VERSION_VAR Sphinx_VERSION_STRING)<br>
FALSE<br>
第二条是<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
在make时报错<br>
make[2]: *** [liblwqq/lib/CMakeFiles/lwqq.dir/lwjs.c.o] 错误 1<br>
make[1]: *** [liblwqq/lib/CMakeFiles/lwqq.dir/all] 错误 2<br>
make: *** [all] 错误 2<br>
运行时出现Hash Function Wrong, WebQQ Protocol update，<br>
不知如何解决？</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=29#respond" onclick='return addComment.moveForm("comment-29", "29", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-ronosol bypostauthor even depth-2" id="li-comment-30">
		<article id="comment-30" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/4002ff3b0fde9017483bc0e0db35e26f.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ronosol</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-30"><time datetime="2013-12-08T11:25:53+00:00">2013 年 12 月 8 日上午 11:25</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>debian6的libpurple是不符合lwqq的检查要求，但这个版本检测只是比较一下版本号，并且 libpurple2.7.3 实测可以用，所以只需要忽略out of date 即可。<br>
安装pkg-config这个包。<br>
用debian7的源安装libmozjs185-dev这个包，解决解析js那个hash函数错误。</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=30#respond" onclick='return addComment.moveForm("comment-30", "30", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-31">
		<article id="comment-31" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-31"><time datetime="2013-12-08T11:46:38+00:00">2013 年 12 月 8 日上午 11:46</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>pkg-config这个包应该已经装上了，在网上查了一下，nspr对应的debian的包是libnspr4-dev，我再装的是提示已经装过了。<br>
正在读取软件包列表… 完成<br>
正在分析软件包的依赖关系树<br>
正在读取状态信息… 完成<br>
libnspr4-dev 已经是最新的版本了。<br>
libnspr4-dev 被设置为手动安装。</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=31#respond" onclick='return addComment.moveForm("comment-31", "31", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even depth-3" id="li-comment-32">
		<article id="comment-32" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-32"><time datetime="2013-12-08T15:51:39+00:00">2013 年 12 月 8 日下午 3:51</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>libmozjs185-dev这个包也装过了。cmake结果如下：<br>
yee@Loong:/home/GitHub/pidgin-lwqq/build$ sudo cmake ..<br>
– The C compiler identification is GNU<br>
– The CXX compiler identification is GNU<br>
– Check for working C compiler: /usr/bin/gcc<br>
– Check for working C compiler: /usr/bin/gcc — works<br>
– Detecting C compiler ABI info<br>
– Detecting C compiler ABI info – done<br>
– Check for working CXX compiler: /usr/bin/c++<br>
– Check for working CXX compiler: /usr/bin/c++ — works<br>
– Detecting CXX compiler ABI info<br>
– Detecting CXX compiler ABI info – done<br>
– checking for module ‘purple’<br>
–   found purple, version 2.7.3<br>
– checking for module ‘glib-2.0′<br>
–   found glib-2.0, version 2.24.2<br>
libpurple version:2.7.3<br>
libpurple version outdate<br>
– REQUIRED_VARS  (missing:  Sphinx-build_EXECUTABLE Sphinx-apidoc_EXECUTABLE VERSION_VAR Sphinx_VERSION_STRING)<br>
FALSE<br>
– checking for module ‘libcurl’<br>
–   found libcurl, version 7.21.0<br>
– checking for module ‘sqlite3′<br>
–   found sqlite3, version 3.7.3<br>
– checking for module ‘zlib’<br>
–   found zlib, version 1.2.3.4<br>
– checking for module ‘mozjs185′<br>
–   found mozjs185, version<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
Package nspr was not found in the pkg-config search path.<br>
Perhaps you should add the directory containing `nspr.pc’<br>
to the PKG_CONFIG_PATH environment variable<br>
Package ‘nspr’, required by ‘SpiderMonkey 1.8.5′, not found<br>
– Found libev: /usr/lib/libev.so<br>
================lwqq flags=====================<br>
– With Libev (Option)     : ON<br>
– With Mozjs (Option)     : ON<br>
– Build Document (Option) : OFF<br>
===============================================<br>
===============pidgin-lwqq flags===============<br>
– Native Language Support : false<br>
– Install Path            : /usr/lib/purple-2<br>
===============================================<br>
– Configuring done<br>
– Generating done<br>
– Build files have been written to: /home/GitHub/pidgin-lwqq/build</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=32#respond" onclick='return addComment.moveForm("comment-32", "32", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-ronosol bypostauthor odd alt depth-4" id="li-comment-33">
		<article id="comment-33" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/4002ff3b0fde9017483bc0e0db35e26f.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ronosol</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-33"><time datetime="2013-12-08T18:21:15+00:00">2013 年 12 月 8 日下午 6:21</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>你看一下/usr/lib/pkgconfig目录下有没有nspr.pc文件，有贴一下。<br>
你是严格按照我的操作顺序来的吗，是否先在共创源上upgrade，再在debian6源上upgrade，cmake后装所有缺的包除了
mozjs185，每次重新cmake前务必清空build目录。改到debian7的源，这一步因为缓步数量原因需要关掉除7外所有源，更新
libev，装mozjs185，装完后改回共创和debian6，这两个始终共存。不要用debian7的源安装其他库。<br>
请说一下从头开始你的操作顺序。<br>
及nspr版本。<br>
另外你的lwqq是哪个版本，我cmake的结果里没有build document这个选项。</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=33#respond" onclick='return addComment.moveForm("comment-33", "33", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-5" id="li-comment-34">
		<article id="comment-34" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-34"><time datetime="2013-12-08T20:50:46+00:00">2013 年 12 月 8 日下午 8:50</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>/usr/lib/pkgconfig目录下没有nspr.pc文件。<br>
顺序不是严格按照你的顺序，因为中间出了很多错误，在其他网友的指点下才进行下去的。大概顺序如下：<br>
1、在共创源+科大debian6的源上update（开始没做这一步，进行不下去），upgrade<br>
2、强制装所有缺的包除了mozjs185、libev、pidgin（当时装不上，没有先安装依赖的包），改到debian7的源，关掉除7外所有源，装mozjs185、libev未成功，就试着按官网编译流程编译了一次。<br>
3、后来装pidgin成功，在pidgin试了一下lwqq不成功，报hash错误，但可以把我其他电脑上的在线同号码QQ踢下去。<br>
4、后来又，改到debian7的源，关掉除7外所有源，安装libev、mozjs185成功<br>
5、换回共创源+科大debian6的源，cmake，make，make install了两次都不成功，提示有错误，表现和3相同。每次重新cmake前都用rm -rf * .*清空了build目录。</p>
<p>lwqq是git在官网上自动下载的，版本号不知道在哪儿查看，用dpkg命令查不到lwqq和pidgin-lwqq软件包。</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt depth-5" id="li-comment-35">
		<article id="comment-35" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-35"><time datetime="2013-12-08T20:55:39+00:00">2013 年 12 月 8 日下午 8:55</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>第3步少写了换回共创源+科大debian6的源，每次在6和7之间换源都update了。</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even depth-5" id="li-comment-36">
		<article id="comment-36" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-36"><time datetime="2013-12-08T21:04:26+00:00">2013 年 12 月 8 日下午 9:04</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>用dpkg命令查pidgin版本号是2:7.3-1，<br>
libnspr4,libnspr4-0d,libnspr4-dev的版本号都是2:4.9.2-1</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-ronosol bypostauthor odd alt depth-5" id="li-comment-37">
		<article id="comment-37" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/4002ff3b0fde9017483bc0e0db35e26f.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ronosol</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-37"><time datetime="2013-12-10T19:38:06+00:00">2013 年 12 月 10 日下午 7:38</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>单libnspr4的这个版本号就不太正常，我用debian6的源安装
libnspr4的最新版本是4.8不是4.9，我觉得你这可能是某步装到了debian7上的包。另外你编译安装的两个包是否会自带其所依赖的包。你之
前用源装包未成功是出现了什么错误，后来安装成功前有没有卸掉你之前手动编译安装的部分。hash错误就是因为编译lwqq时编译选项里off了
mozjs185这个包。建议你先卸载nspr,livev,mozjs的包，包括你用源和手动安装的。在共创下upgrade，在debian6下
upgrade，在debian6下安装nspr,mozjs,libev，还有你apt-cache search 
mozjs出来的几个包，然后再改到debian7的源上，安装libev和mozjs185，这两个包提示一个是只装一个包，另一个需要额外安装一个依
赖包，才正常，如果还提示有其他依赖要装，这说明前面的操作是出了问题的。这个方法你可以先试一下。</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even depth-5" id="li-comment-43">
		<article id="comment-43" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/e6937c64c00c2032c6de8ec676e25659_002.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">sc</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-43"><time datetime="2013-12-29T16:45:17+00:00">2013 年 12 月 29 日下午 4:45</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>多谢指导啊！我先后两次从共创升级都没有成功，都缺少了用共创的源做update和upgrade，因为发现要下载好几百兆的数据，嫌麻烦，就没做了。可能跟这个也有关系。<br>
后来还是安装debian7了，手动网络安装也就1-2个小时。手动安装pidin和lwqq都是一次成功，最多只要十几分钟。所以还是推荐后来的网友全新安装debian7，再装lwqq。</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39">
		<article id="comment-39" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/560101228f868f8620b90bd8193128fc.png" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">xulihang</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-39"><time datetime="2013-12-20T14:05:09+00:00">2013 年 12 月 20 日下午 2:05</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>直接升debian6会把xserver也升了，只有用打过补丁的debian6的显卡驱动了。用共创就是用的老版xorg＋2.8.8的驱动。</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=39#respond" onclick='return addComment.moveForm("comment-39", "39", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-ronosol bypostauthor even depth-2" id="li-comment-41">
		<article id="comment-41" class="comment">
			<footer class="comment-meta">
				<div class="comment-author vcard">
					<img alt="" src="8089D_CoCreate_files/4002ff3b0fde9017483bc0e0db35e26f.png" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">ronosol</span> 在 <a href="https://gigasky.blog.ustc.edu.cn/?p=17#comment-41"><time datetime="2013-12-24T20:57:26+00:00">2013 年 12 月 24 日下午 8:57</time></a> <span class="says">说道：</span>
									</div><!-- .comment-author .vcard -->

				
			</footer>

			<div class="comment-content"><p>如果先upgrade到共创的dev.lemote.com源，再升到debian6呢。我的机子没出现什么显卡的问题。你这里的显卡驱动问题指的什么</p>
</div>

			<div class="reply">
				<a class="comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17&amp;replytocom=41#respond" onclick='return addComment.moveForm("comment-41", "41", "respond", "17")'>回复 <span>↓</span></a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		</ol>

		
		
	
									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://gigasky.blog.ustc.edu.cn/?p=17#respond" style="display:none;">取消回复</a></small></h3>
									<form action="https://gigasky.blog.ustc.edu.cn/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																			<p class="comment-notes">电子邮件地址不会被公开。 必填项已用 <span class="required">*</span> 标注</p>							<p class="comment-form-author"><label for="author">姓名 <span class="required">*</span></label> <input id="author" name="author" size="30" aria-required="true" type="text"></p>
<p class="comment-form-email"><label for="email">电子邮件 <span class="required">*</span></label> <input id="email" name="email" size="30" aria-required="true" type="text"></p>
<p class="comment-form-url"><label for="url">站点</label> <input id="url" name="url" size="30" type="text"></p>
												<p class="comment-form-comment"><label for="comment">评论</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">您可以使用这些 <abbr title="HyperText Markup Language">HTML</abbr> 标签和属性： <code>&lt;a
 href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; 
&lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del 
datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; 
&lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" id="submit" value="发表评论" type="submit">
							<input name="comment_post_ID" value="17" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
											</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">
								<a href="http://cn.wordpress.org/" title="优雅的个人发布平台">自豪地采用 WordPress</a>
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->



</body></html>